# Copyright (c) reifydb.com 2025
# This file is licensed under the AGPL-3.0-or-later, see license.md file

# Verify that normal delete (via delete command) still creates tombstones

# Insert entries
set a=1
set b=2
set c=3
---
ok
ok
ok

# Storage has 3 entries
storage_size
count_entries
count_tombstones
---
size: 3
entries: 3
tombstones: 0

# Normal delete creates tombstone
delete b
---
ok

# Storage still has 3 entries (2 values + 1 tombstone)
storage_size
count_entries
count_tombstones
---
size: 3
entries: 2
tombstones: 1

# Physical drop removes entry completely
drop c
---
ok

# Storage now has 2 entries (1 value + 1 tombstone)
storage_size
count_entries
count_tombstones
---
size: 2
entries: 1
tombstones: 1

# Verify states
contains a
contains b
contains c
---
true
false
false

# Scan shows value and tombstone
scan
---
"a" => "1"
"b" => None
