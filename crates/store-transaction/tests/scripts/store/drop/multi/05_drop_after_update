# Copyright (c) reifydb.com 2025
# This file is licensed under the AGPL-3.0-or-later, see license.md file

# Tests drop after updating a key multiple times.

set a=initial version=1
set a=updated1 version=2
set a=updated2 version=3
---
ok

# Verify all versions exist
get a version=1
get a version=2
get a version=3
---
"a" => "initial"
"a" => "updated1"
"a" => "updated2"

# Drop old versions, keep only latest
drop a keep_last_versions=1
---
ok

get a version=1
get a version=2
get a version=3
---
"a" => None
"a" => None
"a" => "updated2"
