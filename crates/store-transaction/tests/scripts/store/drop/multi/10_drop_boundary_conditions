# Copyright (c) reifydb.com 2025
# This file is licensed under the AGPL-3.0-or-later, see license.md file

# Tests boundary conditions for up_to_version.
# up_to_version uses < (less than), not <= (less than or equal).

set a=1 version=10
---
ok

# up_to_version=10 should NOT drop version 10 (10 < 10 is false)
drop a up_to_version=10
---
ok

get a version=10
---
"a" => "1"

# up_to_version=11 SHOULD drop version 10 (10 < 11 is true)
drop a up_to_version=11
---
ok

get a version=10
---
"a" => None

# Test with version 0
set b=zero version=0
---
ok

# up_to_version=0 should not drop version 0
drop b up_to_version=0
---
ok

get b version=0
---
"b" => "zero"

# up_to_version=1 should drop version 0
drop b up_to_version=1
---
ok

get b version=0
---
"b" => None
