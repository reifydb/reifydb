# Copyright (c) reifydb.com 2025
# This file is licensed under the AGPL-3.0-or-later, see license.md file

# Tests that a single insert is tracked correctly.
# Insert creates a new entry in the "current" category.

# Initial stats should be zero
stats
---
current_count: 0
current_key_bytes: 0
current_value_bytes: 0
historical_count: 0
historical_key_bytes: 0
historical_value_bytes: 0
cdc_count: 0
cdc_key_bytes: 0
cdc_value_bytes: 0
total_bytes: 0

# Insert a single key
# Key "a" = 1 byte, value "1" = 1 byte
# Versioned key = original key (1) + version suffix (8) = 9 bytes
set a=1
---
ok

# Check stats after insert
# current_count should be 1
# current_value_bytes should be 1 (value "1")
stats_current
---
current_count: 1
current_key_bytes: 9
current_value_bytes: 1

# Historical should still be zero (no updates yet)
stats_historical
---
historical_count: 0
historical_key_bytes: 0
historical_value_bytes: 0
