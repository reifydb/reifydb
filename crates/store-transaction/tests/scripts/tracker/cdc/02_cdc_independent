# Copyright (c) reifydb.com 2025
# This file is licensed under the AGPL-3.0-or-later, see license.md file

# Tests that CDC stats accumulate independently during mixed operations.
# CDC tracking counts all change operations and their key/value byte sizes.

# Complex sequence of operations
set key1=value1
---
ok

set key2=value2
---
ok

set key1=updated
---
ok

remove key2
---
ok

drop key1 keep_last_versions=1 version=5
---
ok

# CDC stats accumulate key/value bytes for all change operations
# cdc_count: number of changes, cdc_key_bytes/cdc_value_bytes: cumulative sizes
stats_cdc
---
cdc_count: 4
cdc_key_bytes: 16
cdc_value_bytes: 304
