# Copyright (c) reifydb.com 2025
# This file is licensed under the AGPL-3.0-or-later, see license.md file

# Verifies total_bytes = current_bytes + historical_bytes

# Insert
set a=hello
---
ok

# Update (creates historical entry)
set a=world
---
ok

# key "a" = 1 byte, versioned key = 9 bytes (1 + 8)
# current: versioned_key=9, value=5 = 14
# historical: versioned_key=9, value=5 = 14
# total: 28
stats_totals
---
total_count: 2
current_bytes: 16
historical_bytes: 16
total_bytes: 32

# More updates to increase historical
set a=x
---
ok

# current: versioned_key=9, value=1 = 10
# historical: 2 entries Ã— versioned_key=9 = 18, values=5+5 = 10, total = 28
# total: 38
stats_totals
---
total_count: 3
current_bytes: 12
historical_bytes: 32
total_bytes: 44
