# SPDX-License-Identifier: AGPL-3.0-or-later
# Copyright (c) 2025 ReifyDB
# Test bytecode compilation - project columns

bytecode 'from test.users | map { name, age }'
---
> ╔══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
> ║                                                   COMPILED PROGRAM                                                   ║
> ╠══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
> ║ Entry Point: 0x0000                                                                                                  ║
> ║ Bytecode Size: 9 bytes                                                                                               ║
> ║ Constants: 0 | Sources: 1 | Expressions: 2                                                                           ║
> ╚══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
>
> ╔═ SOURCES ════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
> ║ [0] "test.users"                                                                                                     ║
> ╚══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
> ╔═ EXTENSION SPECS ════════════════════════════════════════════════════════════════════════════════════════════════════╗
> ║ [0] [name, age]                                                                                                      ║
> ╚══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
> ╔═ COMPILED EXPRESSIONS ═══════════════════════════════════════════════════════════════════════════════════════════════╗
> ║ Expressions: 2 (closures, not introspectable)                                                                        ║
> ╚══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
> ╔═ BYTECODE ═══════════════════════════════════════════════════════════════════════════════════════════════════════════╗
> ║ OFFSET     BYTES            INSTRUCTION      OPERANDS                                                                ║
> ╠══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
> ║ 0x0000     08 00 00         PushExtSpec      0            → [name, age]                                              ║
> ║ 0x0003     20 00 00         Source           0            → "test.users"                                             ║
> ║ 0x0006     22 03            Apply            Map                                                                     ║
> ║ 0x0008     FF               Halt                                                                                     ║
> ╚══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
