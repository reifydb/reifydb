# SPDX-License-Identifier: AGPL-3.0-or-later
# Copyright (c) 2025 ReifyDB

# Test if-else-if chain
parse 'if $x > 0 { 1 } else if $x < 0 { -1 } else { 0 }'
---
> Program
> `-- [0] If
>     +-- condition:
>     |   `-- Binary(Gt)
>     |       +-- left: Variable($x)
>     |       `-- right: Integer(0)
>     +-- then:
>     |   `-- [0] Expression
>     |       `-- Integer(1)
>     +-- else_if[0]:
>     |   +-- condition:
>     |   |   `-- Binary(Lt)
>     |   |       +-- left: Variable($x)
>     |   |       `-- right: Integer(0)
>     |   `-- body:
>     |       `-- [0] Expression
>     |           `-- Unary(Neg)
>     |               `-- Integer(1)
>     `-- else:
>         `-- [0] Expression
>             `-- Integer(0)
>

# Test multiple else-if branches
parse 'if $grade >= 90 { "A" } else if $grade >= 80 { "B" } else if $grade >= 70 { "C" } else { "F" }'
---
> Program
> `-- [0] If
>     +-- condition:
>     |   `-- Binary(Ge)
>     |       +-- left: Variable($grade)
>     |       `-- right: Integer(90)
>     +-- then:
>     |   `-- [0] Expression
>     |       `-- String("A")
>     +-- else_if[0]:
>     |   +-- condition:
>     |   |   `-- Binary(Ge)
>     |   |       +-- left: Variable($grade)
>     |   |       `-- right: Integer(80)
>     |   `-- body:
>     |       `-- [0] Expression
>     |           `-- String("B")
>     +-- else_if[1]:
>     |   +-- condition:
>     |   |   `-- Binary(Ge)
>     |   |       +-- left: Variable($grade)
>     |   |       `-- right: Integer(70)
>     |   `-- body:
>     |       `-- [0] Expression
>     |           `-- String("C")
>     `-- else:
>         `-- [0] Expression
>             `-- String("F")
>

# Test else-if without final else
parse 'if $type = "a" { 1 } else if $type = "b" { 2 }'
---
> Program
> `-- [0] If
>     +-- condition:
>     |   `-- Binary(Assign)
>     |       +-- left: Variable($type)
>     |       `-- right: String("a")
>     +-- then:
>     |   `-- [0] Expression
>     |       `-- Integer(1)
>     `-- else_if[0]:
>         +-- condition:
>         |   `-- Binary(Assign)
>         |       +-- left: Variable($type)
>         |       `-- right: String("b")
>         `-- body:
>             `-- [0] Expression
>                 `-- Integer(2)
>
