[package]
name = "reifydb"
authors.workspace = true
version.workspace = true
edition.workspace = true
license.workspace = true
repository.workspace = true

[features]
default = []

# Core async capability - derived automatically when async subsystems are used
async = ["dep:tokio", "reifydb-system/async"]

# Subsystem features - async ones enable the async feature
sub_flow = ["reifydb-system/sub_flow"]
sub_grpc = ["async", "dep:reifydb-network", "reifydb-network/grpc", "reifydb-network/server", "reifydb-system/sub_grpc"]
sub_ws = ["async", "dep:reifydb-network", "reifydb-network/websocket", "reifydb-network/server", "reifydb-system/sub_ws"]

# Convenience features
server = ["sub_grpc", "sub_ws"]  # Enable all network subsystems
client = ["dep:reifydb-network", "reifydb-network/client"]
embedded_async = []
embedded_sync = []

# Backwards compatibility aliases
grpc = ["sub_grpc"]
websocket = ["sub_ws"]

[dependencies]
reifydb-auth = { workspace = true }
reifydb-core = { workspace = true }
reifydb-engine = { workspace = true }
reifydb-network = { workspace = true, optional = true, features = ["grpc", "websocket"] }
reifydb-storage = { workspace = true }
reifydb-system = { workspace = true }
reifydb-rql = { workspace = true }
reifydb-transaction = { workspace = true }

tokio = { workspace = true, features = ["macros", "rt-multi-thread"], optional = true }