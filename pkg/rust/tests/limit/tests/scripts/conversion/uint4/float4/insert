# Copyright (c) reifydb.com 2025
# This file is licensed under the AGPL-3.0-or-later, see license.md file
(command 'create namespace test')

(command 'create table test.conversion{col: float4}')

(command 'from [{ col: cast(cast(0, uint4), float4) }] insert test.conversion')
command 'from test.conversion map col'
---
> +-------------------+-------+
> |  __ROW__NUMBER__  |  col  |
> +-------------------+-------+
> |         1         |   0   |
> +-------------------+-------+
> 

(command 'from [{ col: cast(cast(16777216, uint4), float4) }] insert test.conversion')
command 'from test.conversion map col'
---
> +-------------------+------------+
> |  __ROW__NUMBER__  |    col     |
> +-------------------+------------+
> |         2         |  16777216  |
> |         1         |     0      |
> +-------------------+------------+
> 

!command 'from [{ col: cast(cast(16777217, uint4), float4) }] insert test.conversion'
---
>  Error CAST_002: failed to cast to Float4
>   at "(16777217float4" (line 1, column 18)
> 
>   1 │ from [{ col: cast(cast(16777217, uint4), float4) }] insert test.conversion
>     │                   ~~~~~~~~~~~~~~~
>     │              failed to cast to Float4
> 
>   ↳  Error NUMBER_004: too large for precise float conversion
>     at "16777217" (line 1, column 24)
> 
>     1 │ from [{ col: cast(cast(16777217, uint4), float4) }] insert test.conversion
>       │                        ~~~~~~~~
>       │ converting '16777217' from Uint4 to Float4 would lose precision
> 
>     note: Float4 can only represent from 0 to 16_777_216 (2^24) precisely
>     note: consider using a different numeric type if exact precision is required
> 
